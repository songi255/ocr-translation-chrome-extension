(()=>{"use strict";let e=!1,o=!1;const t={sx:0,sy:0,ex:0,ey:0,devicePixelRatio:window.devicePixelRatio};function n(c){c.preventDefault(),c.stopPropagation(),o?(t.ex=c.clientX,t.ey=c.clientY,document.removeEventListener("mousedown",n),document.removeEventListener("mousemove",s),document.body.style.cursor="auto",e=!1,o=!1,console.log(t),chrome.runtime.sendMessage({eventType:"request-operation",cropPos:Object.assign({},t)},(e=>{console.log(e),fetch(e.base64).then((e=>e.blob())).then((e=>{var o;console.log(e);const t=new Image,n=URL.createObjectURL(e);t.src=n,null===(o=document.querySelector("body"))||void 0===o||o.appendChild(t)}))}))):(o=!0,t.sx=c.clientX,t.sy=c.clientY,document.addEventListener("mousemove",s))}function s(e){e.stopPropagation(),t.ex=e.clientX,t.ey=e.clientY}document.addEventListener("mousedown",(t=>{e||(e=!0,o=!1,document.body.style.cursor="crosshair",document.addEventListener("mousedown",n))}))})();