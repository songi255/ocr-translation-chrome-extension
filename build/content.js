(()=>{"use strict";let e=!1,t=!1;const o={sx:0,sy:0,ex:0,ey:0,devicePixelRatio:window.devicePixelRatio};let n=!1,s=!1;function i(n){n.preventDefault(),n.stopPropagation(),t?(o.ex=n.clientX,o.ey=n.clientY,document.removeEventListener("mousedown",i),document.removeEventListener("mousemove",r),function(){if(document.body.style.cursor="auto",e=!1,t=!1,o.sx==o.ex||o.sy==o.ey)throw new Error("capture region size can't be zero.");chrome.runtime.sendMessage({eventType:"request-operation",cropPos:Object.assign({},o)},(async e=>{console.log("ocr text : "+e.text)}))}()):(t=!0,o.sx=n.clientX,o.sy=n.clientY,document.addEventListener("mousemove",r))}function r(e){e.stopPropagation(),o.ex=e.clientX,o.ey=e.clientY}document.addEventListener("mousedown",(o=>{2==o.button&&(n&&(o.preventDefault(),o.stopPropagation()),s=!0),0==o.button&&(n=!0),n&&s&&(e||2===o.button&&(e=!0,t=!1,document.body.style.cursor="crosshair",document.addEventListener("mousedown",i)))})),document.addEventListener("mouseup",(e=>{2==e.button&&(s=!1),0==e.button&&(n=!1)}))})();